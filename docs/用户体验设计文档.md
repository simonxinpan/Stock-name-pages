# 个股详情页用户体验设计文档

## 1. 设计理念

### 1.1 核心设计原则

#### 1.1.1 文化本土化 (Cultural Localization)
- **语言友好**: 优先中文显示，英文作为补充
- **习惯适配**: 遵循中国用户的阅读和操作习惯
- **色彩规范**: 红涨绿跌，符合中国股市文化
- **信息密度**: 适应华人用户对信息密度的偏好

#### 1.1.2 认知负荷最小化
- **渐进式信息披露**: 重要信息优先，详细信息按需展开
- **视觉层次清晰**: 通过字体、颜色、间距建立信息层次
- **术语解释**: 复杂财务术语提供通俗易懂的中文解释
- **上下文帮助**: 在用户需要时提供及时的帮助信息

#### 1.1.3 专业可信赖
- **数据准确性**: 确保所有数据的准确性和时效性
- **来源透明**: 明确标注数据来源和更新时间
- **专业外观**: 采用金融行业标准的视觉设计
- **稳定性**: 确保功能的稳定性和可靠性

### 1.2 目标用户体验

#### 1.2.1 新手用户 (投资经验 < 1年)
- **学习友好**: 提供丰富的教育内容和术语解释
- **操作简单**: 核心功能一键可达，避免复杂操作
- **引导明确**: 提供清晰的操作引导和功能说明

#### 1.2.2 进阶用户 (投资经验 1-5年)
- **效率优先**: 快速访问常用功能和数据
- **定制化**: 支持个性化设置和偏好保存
- **深度分析**: 提供更多技术分析工具和指标

#### 1.2.3 专业用户 (投资经验 > 5年)
- **数据丰富**: 提供全面的财务数据和分析工具
- **快捷操作**: 支持键盘快捷键和批量操作
- **高级功能**: 提供专业级的分析和比较功能

## 2. 界面布局设计

### 2.1 整体布局结构

```
┌─────────────────────────────────────────────────────────────┐
│                        顶部导航栏                            │
├─────────────────────────────────────────────────────────────┤
│  股票标题区域  │                                    │ 语言切换 │
│  AAPL - 苹果   │        实时价格和涨跌信息              │  中/EN   │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│                        K线图区域                            │
│                     (占据主要视觉空间)                       │
│                                                             │
├─────────────────────────────────────────────────────────────┤
│    财务指标    │    公司信息    │    新闻资讯    │    分析师观点  │
│   (Tab切换)    │   (Tab切换)    │   (Tab切换)    │   (Tab切换)   │
└─────────────────────────────────────────────────────────────┘
```

### 2.2 响应式布局

#### 2.2.1 桌面端 (>1200px)
- 采用三栏布局：左侧信息面板 + 中间K线图 + 右侧工具面板
- K线图占据60%宽度，确保充足的分析空间
- 财务指标以卡片形式在底部展示

#### 2.2.2 平板端 (768px-1200px)
- 采用两栏布局：上方价格信息 + 下方K线图
- 财务指标和公司信息以Tab形式切换
- 保持K线图的可操作性

#### 2.2.3 移动端 (<768px)
- 采用单栏垂直布局
- 价格信息置顶，K线图紧随其后
- 其他信息通过滑动Tab访问
- 优化触摸操作体验

## 3. 视觉设计规范

### 3.1 色彩系统

#### 3.1.1 主色调
```css
/* 主品牌色 */
--primary-color: #1890ff;        /* 蓝色 - 专业、可信赖 */
--primary-light: #40a9ff;
--primary-dark: #096dd9;

/* 涨跌色彩 */
--rise-color: #ff4d4f;           /* 红色 - 上涨 */
--fall-color: #52c41a;           /* 绿色 - 下跌 */
--neutral-color: #8c8c8c;        /* 灰色 - 平盘 */

/* 背景色彩 */
--bg-primary: #ffffff;           /* 主背景 */
--bg-secondary: #fafafa;         /* 次要背景 */
--bg-tertiary: #f5f5f5;          /* 三级背景 */

/* 文字色彩 */
--text-primary: #262626;         /* 主要文字 */
--text-secondary: #595959;       /* 次要文字 */
--text-tertiary: #8c8c8c;        /* 辅助文字 */
```

#### 3.1.2 语义化色彩
```css
/* 功能色彩 */
--success-color: #52c41a;        /* 成功状态 */
--warning-color: #faad14;        /* 警告状态 */
--error-color: #ff4d4f;          /* 错误状态 */
--info-color: #1890ff;           /* 信息状态 */

/* K线图色彩 */
--candle-rise: #ff4d4f;          /* 阳线 */
--candle-fall: #52c41a;          /* 阴线 */
--ma5-color: #ff9500;            /* MA5均线 */
--ma10-color: #935eff;           /* MA10均线 */
--ma20-color: #ff5b5b;           /* MA20均线 */
--ma60-color: #00d4aa;           /* MA60均线 */
```

### 3.2 字体系统

#### 3.2.1 字体族
```css
/* 中文字体 */
--font-family-zh: 'PingFang SC', 'Microsoft YaHei', '微软雅黑', 'Helvetica Neue', Helvetica, Arial, sans-serif;

/* 英文字体 */
--font-family-en: 'Roboto', 'Helvetica Neue', Helvetica, Arial, sans-serif;

/* 数字字体 */
--font-family-number: 'Roboto Mono', 'SF Mono', Monaco, 'Cascadia Code', 'Roboto Mono', Consolas, 'Courier New', monospace;
```

#### 3.2.2 字体大小
```css
/* 标题字体 */
--font-size-h1: 32px;            /* 页面主标题 */
--font-size-h2: 24px;            /* 区块标题 */
--font-size-h3: 18px;            /* 小节标题 */

/* 正文字体 */
--font-size-lg: 16px;            /* 大号正文 */
--font-size-base: 14px;          /* 基础正文 */
--font-size-sm: 12px;            /* 小号正文 */
--font-size-xs: 10px;            /* 极小号文字 */

/* 数字字体 */
--font-size-price: 28px;         /* 股价显示 */
--font-size-change: 16px;        /* 涨跌显示 */
--font-size-metric: 14px;        /* 指标数值 */
```

### 3.3 间距系统

```css
/* 基础间距单位 */
--space-xs: 4px;
--space-sm: 8px;
--space-md: 16px;
--space-lg: 24px;
--space-xl: 32px;
--space-xxl: 48px;

/* 组件间距 */
--component-margin: var(--space-lg);
--section-margin: var(--space-xl);
--page-padding: var(--space-lg);
```

## 4. 组件设计规范

### 4.1 股价信息组件

#### 4.1.1 设计要求
- **视觉层次**: 股价最大最醒目，涨跌信息次之
- **色彩运用**: 涨跌用红绿色区分，平盘用灰色
- **信息密度**: 在有限空间内展示最关键信息
- **响应式**: 在不同屏幕尺寸下保持可读性

#### 4.1.2 组件结构
```jsx
<StockHeader>
  <StockTitle>
    <Symbol>AAPL</Symbol>
    <CompanyName>
      <ChineseName>苹果公司</ChineseName>
      <EnglishName>Apple Inc.</EnglishName>
    </CompanyName>
  </StockTitle>
  
  <PriceInfo>
    <CurrentPrice>$175.43</CurrentPrice>
    <PriceChange>
      <ChangeAmount>+$2.34</ChangeAmount>
      <ChangePercent>(+1.35%)</ChangePercent>
    </PriceChange>
  </PriceInfo>
  
  <MarketInfo>
    <MarketStatus>盘后交易</MarketStatus>
    <LastUpdate>更新时间: 16:00 EST</LastUpdate>
  </MarketInfo>
</StockHeader>
```

### 4.2 K线图组件

#### 4.2.1 设计要求
- **专业外观**: 采用金融行业标准的K线图样式
- **交互友好**: 支持缩放、平移、十字光标等操作
- **信息丰富**: 显示价格、成交量、技术指标
- **性能优化**: 大数据量下保持流畅操作

#### 4.2.2 功能布局
```
┌─────────────────────────────────────────────────────────────┐
│ 时间周期选择: [1分] [5分] [15分] [30分] [1小时] [日] [周] [月]  │
├─────────────────────────────────────────────────────────────┤
│ 技术指标: □MA □MACD □RSI □KDJ    工具: [十字光标] [画线工具]  │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│                        K线图主体                            │
│                                                             │
├─────────────────────────────────────────────────────────────┤
│                       成交量图                              │
├─────────────────────────────────────────────────────────────┤
│                     技术指标图                              │
└─────────────────────────────────────────────────────────────┘
```

### 4.3 财务指标组件

#### 4.3.1 设计要求
- **分类清晰**: 按估值、盈利、财务健康度等分类
- **对比明显**: 与行业平均值和历史数据对比
- **解释详细**: 每个指标提供中文解释和计算方法
- **趋势展示**: 用图表展示指标的历史趋势

#### 4.3.2 信息架构
```
财务指标
├── 估值指标
│   ├── 市盈率 (P/E): 28.5 [行业平均: 25.2] ↗
│   ├── 市净率 (P/B): 7.8 [行业平均: 4.1] ↗
│   └── 市销率 (P/S): 6.2 [行业平均: 5.8] ↗
├── 盈利指标
│   ├── 每股收益 (EPS): $6.15 [同比: +8.2%] ↗
│   ├── 净资产收益率 (ROE): 26.4% [行业平均: 18.5%] ↗
│   └── 毛利率: 43.3% [去年同期: 41.8%] ↗
└── 财务健康
    ├── 资产负债率: 31.2% [行业平均: 45.6%] ↓
    ├── 流动比率: 1.07 [安全线: 1.0] ↗
    └── 现金比率: 0.18 [行业平均: 0.15] ↗
```

## 5. 交互设计

### 5.1 导航交互

#### 5.1.1 Tab导航
- **视觉反馈**: 当前Tab高亮显示，未选中Tab半透明
- **切换动画**: 平滑的淡入淡出效果，时长200ms
- **键盘支持**: 支持左右箭头键切换Tab
- **触摸优化**: 移动端增大触摸区域，支持滑动切换

#### 5.1.2 面包屑导航
```
首页 > 美股市场 > 科技股 > 苹果公司 (AAPL)
```

### 5.2 数据交互

#### 5.2.1 实时数据更新
- **视觉提示**: 数据更新时短暂高亮显示
- **更新频率**: 股价15秒更新，K线图实时更新
- **网络状态**: 显示连接状态，断线时提示用户
- **数据来源**: 在页面底部标注数据提供商

#### 5.2.2 图表交互
- **缩放操作**: 鼠标滚轮缩放，双击重置
- **平移操作**: 鼠标拖拽或键盘方向键
- **十字光标**: 鼠标悬停显示精确数值
- **数据提示**: Tooltip显示详细信息

### 5.3 帮助系统

#### 5.3.1 术语解释
- **触发方式**: 鼠标悬停或点击问号图标
- **显示内容**: 中文解释 + 计算公式 + 应用场景
- **关闭方式**: 点击其他区域或ESC键

#### 5.3.2 功能引导
- **新用户引导**: 首次访问时的功能介绍
- **操作提示**: 关键操作的实时提示
- **帮助文档**: 完整的使用说明和FAQ

## 6. 多语言设计

### 6.1 语言切换

#### 6.1.1 切换控件
- **位置**: 页面右上角，易于发现和操作
- **样式**: 简洁的切换按钮，显示当前语言
- **状态保存**: 用户选择的语言偏好本地存储

#### 6.1.2 切换效果
- **即时生效**: 切换后立即更新所有文本
- **保持状态**: 切换语言不影响当前页面状态
- **动画效果**: 平滑的文本替换动画

### 6.2 双语显示策略

#### 6.2.1 重要信息双语
- **公司名称**: 中文名 + 英文名
- **财务术语**: 中文术语 + 英文缩写
- **重要公告**: 中文摘要 + 英文原文链接

#### 6.2.2 单语显示
- **数值数据**: 统一使用阿拉伯数字
- **图表标签**: 根据当前语言设置显示
- **操作按钮**: 根据当前语言设置显示

### 6.3 本土化适配

#### 6.3.1 数字格式
- **中文环境**: 万、亿单位，千分位逗号
- **英文环境**: K、M、B单位，千分位逗号
- **货币格式**: 美元符号前置，精确到分
- **大数值显示**: 市值等大数字优先使用中文单位（万亿、千亿）
- **财务指标**: 根据用户语言偏好自动格式化数值单位

#### 6.3.2 时间格式
- **中文环境**: YYYY年MM月DD日 HH:mm
- **英文环境**: MM/DD/YYYY HH:mm AM/PM
- **时区显示**: 明确标注EST/PST时区

## 7. 可访问性设计

### 7.1 视觉可访问性

#### 7.1.1 色彩对比
- **文字对比度**: 正文文字对比度 ≥ 4.5:1
- **重要信息**: 关键信息对比度 ≥ 7:1
- **色盲友好**: 不仅依赖颜色传达信息

#### 7.1.2 字体可读性
- **最小字号**: 移动端不小于14px
- **行间距**: 1.4-1.6倍行高
- **字符间距**: 适当的字符间距提高可读性

### 7.2 操作可访问性

#### 7.2.1 键盘导航
- **Tab顺序**: 逻辑清晰的Tab导航顺序
- **焦点指示**: 明显的焦点指示器
- **快捷键**: 常用功能的键盘快捷键

#### 7.2.2 触摸优化
- **触摸目标**: 最小44px×44px触摸区域
- **手势支持**: 常用的触摸手势
- **反馈明确**: 触摸操作的视觉反馈

## 8. 性能优化

### 8.1 加载性能

#### 8.1.1 首屏优化
- **关键路径**: 优先加载股价和基本信息
- **懒加载**: K线图和财务数据按需加载
- **预加载**: 预加载用户可能访问的数据

#### 8.1.2 资源优化
- **图片压缩**: 使用WebP格式，压缩率70%+
- **代码分割**: 按路由和功能分割代码
- **CDN加速**: 静态资源使用CDN分发

### 8.2 运行性能

#### 8.2.1 渲染优化
- **虚拟滚动**: 大数据列表使用虚拟滚动
- **防抖节流**: 搜索和滚动事件防抖处理
- **内存管理**: 及时清理不需要的数据和监听器

#### 8.2.2 数据优化
- **缓存策略**: 合理的数据缓存和更新策略
- **增量更新**: 只更新变化的数据
- **压缩传输**: 启用gzip压缩

## 9. 技术架构

### 9.1 前端技术栈
```
Next.js 14 + TypeScript
├── UI框架: Tailwind CSS + Headless UI
├── 图表库: TradingView Charting Library
├── 状态管理: Zustand
├── 国际化: Next-i18next
└── 部署: Vercel (无服务器)
```

### 9.2 数据层
```
Finnhub API + Neon PostgreSQL
├── 实时数据: Finnhub WebSocket
├── 历史数据: Finnhub REST API
├── 用户数据: Neon PostgreSQL
└── 缓存策略: Next.js ISR + SWR
```

### 9.3 核心数据源
- **股价数据**: Finnhub API (实时报价、历史数据)
- **公司信息**: Finnhub Company Profile
- **财务指标**: Finnhub Basic Financials
- **用户设置**: Neon PostgreSQL 数据库

---

**文档版本**: v1.0  
**创建日期**: 2024年12月  
**负责人**: PM-Core  
**审核状态**: 待设计评审